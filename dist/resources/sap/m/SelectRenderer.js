/*!
 * OpenUI5
 * (c) Copyright 2009-2021 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/ui/core/Renderer","sap/ui/core/IconPool","sap/m/library","sap/ui/Device","sap/ui/core/library"],function(e,t,a,i,n){"use strict";var s=n.TextDirection;var r=n.ValueState;var d=a.SelectType;var l={apiVersion:2};l.CSS_CLASS="sapMSlt";l.render=function(e,a){var n=a.getTooltip_AsString(),s=a.getType(),o=a.getAutoAdjustWidth(),c=a.getEditable(),u=a.getEnabled(),g=a.getWidth(),S=g.indexOf("%")>-1,f=o||g==="auto"||S,p=l.CSS_CLASS,I=u&&c;e.openStart("div",a);this.addClass(e,a);e.class(p);e.class(p+a.getType());if(!u){e.class(p+"Disabled")}else if(!c){e.class(p+"Readonly")}if(f&&s===d.Default){e.class(p+"MinWidth")}if(o){e.class(p+"AutoAdjustedWidth")}else{e.style("width",g)}if(a.getIcon()){e.class(p+"WithIcon")}if(I&&i.system.desktop){e.class(p+"Hoverable")}e.class(p+"WithArrow");if(a.getValueState()!==r.None&&I){this.addValueStateClasses(e,a)}e.style("max-width",a.getMaxWidth());if(n){e.attr("title",n)}else if(s===d.IconOnly){var b=t.getIconInfo(a.getIcon());if(b){e.attr("title",b.text)}}if(u){e.attr("tabindex","-1")}e.openEnd();this.renderFocusElement(e,a);this.renderHiddenInput(e,a);this.renderLabel(e,a);switch(s){case d.Default:this.renderArrow(e,a);break;case d.IconOnly:this.renderIcon(e,a);break}var h=a.getList();if(a._isShadowListRequired()&&h){this.renderShadowList(e,h)}this.renderAccessibilityDomNodes(e,a);e.close("div")};l.renderFocusElement=function(e,t){var a=t._getSelectedItemText();e.voidStart("input",t.getId()+"-hiddenSelect");this.writeAccessibilityState(e,t);e.class("sapUiPseudoInvisibleText");e.class(l.CSS_CLASS+"HiddenSelect");if(t.getEnabled()){e.attr("tabindex","0")}e.attr("type","button");if(a){e.attr("value",a)}e.voidEnd()};l.renderHiddenInput=function(e,t){e.voidStart("input",t.getId()+"-hiddenInput");e.attr("name",t.getName());e.attr("value",t.getSelectedKey());e.attr("aria-readonly","true");e.attr("tabindex","-1");e.attr("aria-hidden","true");e.class("sapUiPseudoInvisibleText");e.voidEnd()};l.renderLabel=function(t,a){var i=a.getSelectedItem(),n=a.getTextDirection(),o=e.getTextAlign(a.getTextAlign(),n),c=l.CSS_CLASS,u=a.getEnabled()&&a.getEditable();t.openStart("span",a.getId()+"-label");t.attr("aria-hidden",true);t.class(c+"Label");if(a.getValueState()!==r.None&&u){t.class(c+"LabelState");t.class(c+"Label"+a.getValueState())}if(a.getType()===d.IconOnly){t.class("sapUiPseudoInvisibleText")}if(n!==s.Inherit){t.attr("dir",n.toLowerCase())}t.style("text-align",o);t.openEnd();if(a.getType()!==d.IconOnly){t.renderControl(a._getValueIcon());t.openStart("span",a.getId()+"-labelText");t.class("sapMSelectListItemText");t.openEnd();t.text(i&&i.getParent()?i.getText():null);t.close("span")}t.close("span")};l.renderArrow=function(e,t){var a=l.CSS_CLASS;e.openStart("span",t.getId()+"-arrow");e.attr("aria-hidden",true);e.class(a+"Arrow");if(t.getValueState()!==r.None){e.class(a+"ArrowState")}e.openEnd().close("span")};l.renderIcon=function(e,t){var a=t.getTooltip_AsString();e.icon(t.getIcon(),l.CSS_CLASS+"Icon",{id:t.getId()+"-icon",title:a||null})};l.renderShadowList=function(e,t){var a=t.getRenderer();a.writeOpenListTag(e,t,{elementData:false});this.renderShadowItems(e,t);a.writeCloseListTag(e,t)};l.renderShadowItems=function(e,t){var a=t.getRenderer(),i=t.getItems().length,n=t.getSelectedItem();for(var s=0,r=t.getItems();s<r.length;s++){a.renderItem(e,t,r[s],{selected:n===r[s],setsize:i,posinset:s+1,elementData:false})}};l.addClass=function(e,t){};l.addValueStateClasses=function(e,t){e.class(l.CSS_CLASS+"State");e.class(l.CSS_CLASS+t.getValueState())};l.getAriaRole=function(e){switch(e.getType()){case d.Default:return"combobox";case d.IconOnly:return"button"}};l.writeAccessibilityState=function(e,a){var i=a.getValueState(),n=a.getSelectedItem(),s=a.getType()===d.IconOnly,l=a._getValueIcon(),o=a.getEnabled()&&a.getEditable(),c=[],u=[],g,S,f,p;a.getLabels().forEach(function(e){if(e&&e.getId){c.push(e.getId())}});if(a.isOpen()&&n&&n.getDomRef()){f=n.getId()}if(n&&!n.getText()&&n.getIcon&&n.getIcon()){var I=t.getIconInfo(n.getIcon());if(I){p=I.text||I.name}}if(i!==r.None&&o){S=a.getValueStateMessageId()+"-sr"}if(p&&l){u.push(l.getId())}if(c.length){u=u.concat(c)}g={value:u.join(" "),append:true};e.accessibilityState(null,{role:this.getAriaRole(a),roledescription:a._sAriaRoleDescription,readonly:s?undefined:a.getEnabled()&&!a.getEditable(),required:a._isRequired()||undefined,disabled:!a.getEnabled()||undefined,expanded:a.isOpen(),invalid:a.getValueState()===r.Error&&o?true:undefined,labelledby:s||g.value===""?undefined:g,describedby:S,activedescendant:f,haspopup:a.getEditable()?"listbox":undefined})};l.renderAccessibilityDomNodes=function(e,t){var a=t.getValueState(),i,n=t.getEnabled()&&t.getEditable();if(a===r.None||!n){return}i=t._getValueStateText();e.openStart("div",t.getValueStateMessageId()+"-sr").class("sapUiPseudoInvisibleText").attr("aria-hidden",true).openEnd().text(i).close("div")};return l},true);