/*!
 * OpenUI5
 * (c) Copyright 2009-2021 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.getCore().loadLibrary("sap.ui.unified");sap.ui.define(["sap/ui/unified/calendar/CalendarDate","sap/ui/unified/calendar/CalendarUtils","sap/ui/unified/calendar/Month","sap/ui/core/date/UniversalDate","./PlanningCalendarLegend","sap/ui/core/InvisibleText","sap/ui/core/Core","sap/ui/unified/library"],function(e,a,t,n,l,i,r,s){"use strict";var o=s.CalendarDayType;var p={apiVersion:2};p.render=function(e,a){var t=a._getCoreLocaleData();var n=a._getDensitySizes();e.openStart("div",a);e.class("sapMSinglePCGrid");e.class("sapMSPCMonthGrid");e.openEnd();this.renderDayNames(e,a,t);e.openStart("div");e.class("sapMSinglePCGridContent");e.openEnd();this.renderCells(e,a,t,n);e.close("div");e.close("div")};p.renderCells=function(e,a,t,n){var l=a._getCells(),i=a._getVerticalLabels(),r=a._getColumns(),s=[],o=[],p,d,c,g,u=[],v,f,C,S;for(C=0;C<a._getRows();C++){f=0;e.openStart("div");e.attr("role","grid");e.class("sapMSPCMonthWeek");e.openEnd();e.openStart("div");e.class("sapMSPCMonthWeekNumber");e.openEnd();e.text(i[C]);e.close("div");for(S=0;S<r;S++){p=C*r+S;d=l[p];c=a._getAppointmetsForADay(d);g=a._getPreviousAppointmetsForADay(d);u.push(g);v=a._getMoreCountPerCell(p);s.push(v);o.push(c);f=Math.max(f,a._aAppsLevelsPerDay[p].length)}e.openStart("div");e.class("sapMSPCMonthDays");e.class("sapMSPCMonthDaysMax"+f);e.attr("role","row");e.openEnd();for(S=0;S<r;S++){p=C*r+S;d=l[p];this.renderDay(e,a,d,t,s[p],p)}e.openStart("div");e.class("sapMSinglePCBlockers");e.class("sapUiCalendarRowVisFilled");e.attr("role","list");e.openEnd();for(S=0;S<r;S++){p=C*r+S;d=l[p];if(S===0){this.renderAppointments(e,a,u[p],S,s[p],n,C)}this.renderAppointments(e,a,o[p],S,s[p],n,C)}e.close("div");e.close("div");e.close("div")}};p.renderDay=function(e,n,i,s,o,p){var d=n._getSpecialDates(),c=t.prototype._getDateTypes.call(n,i),g=n._getDateFormatter(),u,v;e.openStart("div");e.class("sapMSPCMonthDay");e.attr("role","gridcell");if(a._isWeekend(i,s)){e.class("nonWorkingTimeframe")}if(d){if(c&&c[0]){u=c[0];e.class("sapUiCalendarSpecialDay"+u.type);v=l.findLegendItemForItem(r.byId(n._sLegendId),u)}}e.attr("sap-ui-date",i.valueOf().toString());e.attr("tabindex",-1);e.attr("aria-labelledby",g.format(i.toLocalJSDate())+"-Descr");e.openEnd();this.renderDndPlaceholder(e,n.getAggregation("_appsPlaceholders")[p]);e.openStart("div");e.class("specialDateIndicator");e.openEnd();e.close("div");e.openStart("div");e.class("sapMSPCMonthDayNumber");e.openEnd();e.text(i.getDate());e.close("div");if(o){e.openStart("div");e.class("sapMSPCMonthLnkMore");e.openEnd();e.renderControl(n._getMoreLink(o,i,p));e.close("div")}e.openStart("span",g.format(i.toLocalJSDate())+"-Descr");e.class("sapUiInvisibleText");e.openEnd();e.text(n._getCellStartInfo(i.toLocalJSDate()));if(n._sLegendId&&v){e.text(v)}e.close("span");e.close("div")};p.renderAppointments=function(e,a,t,n,l,i,r){var s=a._getMaxAppointments(),o=l?s-2:s-1;for(var p=0;p<t.length;p++){if(t[p].level<=o){this.renderAppointment(e,a,t[p],n,i,r)}}};p.renderAppointment=function(e,a,t,n,l,s){var p=t.data,d=t.width,c=t.level,g=a._getColumns(),u=p.getTooltip_AsString(),v=p.getType(),f=p.getColor(),C=p.getTitle(),S=p.getText(),y=p.getIcon(),b=p.getId(),h=p.getParent().getEnableAppointmentsDragAndDrop(),A={role:"listitem",labelledby:{value:i.getStaticId("sap.ui.unified","APPOINTMENT"),append:true},selected:null},D=g-n-d,M=r.getConfiguration().getRTL(),m,T=r.getConfiguration().getTheme().indexOf("_hc")?2:1;D=D<0?0:D;if(C){A["labelledby"].value=A["labelledby"].value+" "+b+"-Title"}A["labelledby"].value=A["labelledby"].value+" "+b+"-Descr";if(S){A["labelledby"].value=A["labelledby"].value+" "+b+"-Text"}if(p.getTentative()){A["labelledby"].value=A["labelledby"].value+" "+i.getStaticId("sap.ui.unified","APPOINTMENT_TENTATIVE")}if(p.getSelected()){A["labelledby"].value=A["labelledby"].value+" "+i.getStaticId("sap.ui.unified","APPOINTMENT_SELECTED")}e.openStart("div",p.getId()+"_"+n+s);e.attr("draggable",h);e.attr("data-sap-ui-draggable",h);e.attr("data-sap-ui-related",p.getId());e.attr("data-sap-level",c);e.attr("data-sap-width",d);e.attr("tabindex",0);if(u){e.attr("title",u)}e.accessibilityState(p,A);e.class("sapMSinglePCAppointmentWrap");e.class("sapUiCalendarRowApps");if(!f&&v!==o.None){e.class("sapUiCalendarApp"+v)}if(f){if(r.getConfiguration().getRTL()){e.style("border-right-color",f)}else{e.style("border-left-color",f)}}e.style(M?"right":"left","calc("+n*100/g+"% + "+T+"px)");e.style(M?"left":"right","calc("+D*100/g+"% + "+T+"px)");e.style("top",c*l.appHeight+l.cellHeaderHeight+"rem");e.openEnd();e.openStart("div");e.class("sapUiCalendarApp");if(p.getSelected()){e.class("sapUiCalendarAppSel")}if(p.getTentative()){e.class("sapUiCalendarAppTent")}if(y){e.class("sapUiCalendarAppWithIcon")}e.openEnd();e.openStart("div");e.class("sapUiCalendarAppCont");if(f){e.style("background-color",p._getCSSColorForBackground(f))}e.openEnd();if(t.hasPrevious<0){m=["sapUiCalendarAppArrowIconLeft","sapUiCalendarAppArrowIcon"];e.icon("sap-icon://arrow-left",m,{title:null})}if(y){m=["sapUiCalendarAppIcon"];var I={};I["id"]=b+"-Icon";I["title"]=null;e.icon(y,m,I)}if(C){e.openStart("span",b+"-Title");e.class("sapUiCalendarAppTitle");e.openEnd();e.text(C,true);e.close("span")}if(t.hasNext<0){m=["sapUiCalendarAppArrowIconRight","sapUiCalendarAppArrowIcon"];e.icon("sap-icon://arrow-right",m,{title:null})}e.openStart("span",b+"-Descr");e.class("sapUiInvisibleText");e.openEnd();e.text(a._getAppointmentAnnouncementInfo(p));e.close("span");e.close("div");e.close("div");e.close("div")};p.renderDayNames=function(e,a,t){var n=t.getFirstDayOfWeek(),l=a.getId(),i,s=r.getConfiguration().getCalendarType(),o=t.getDaysStandAlone("abbreviated",s),p=t.getDaysStandAlone("wide",s),d;e.openStart("div",l+"-Names");e.class("sapMSPCMonthDayNames");e.openEnd();for(var c=0;c<7;c++){d=(c+n)%7;i=l+"-WH"+d;e.openStart("div",i);e.class("sapUiCalWH");if(c===0){e.class("sapUiCalFirstWDay")}e.accessibilityState(null,{role:"columnheader",label:p[d]});e.openEnd();e.text(o[d%7]);e.close("div")}e.close("div")};p.renderDndPlaceholder=function(e,a){e.openStart("div");e.class("sapMSinglePCOverlay");e.openEnd();e.renderControl(a);e.close("div")};return p},true);