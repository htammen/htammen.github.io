/*!
 * OpenUI5
 * (c) Copyright 2009-2021 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["./BaseHeader","sap/m/library","sap/f/library","sap/m/Text","sap/f/Avatar","sap/ui/Device","sap/f/cards/HeaderRenderer","sap/ui/core/Core","sap/ui/core/InvisibleText"],function(t,e,i,a,s,r,o,n,p){"use strict";var l=e.AvatarShape;var u=e.AvatarColor;var g=t.extend("sap.f.cards.Header",{metadata:{library:"sap.f",interfaces:["sap.f.cards.IHeader"],properties:{title:{type:"string",defaultValue:""},subtitle:{type:"string",defaultValue:""},statusText:{type:"string",defaultValue:""},iconDisplayShape:{type:"sap.m.AvatarShape",defaultValue:l.Circle},iconSrc:{type:"sap.ui.core.URI",defaultValue:""},iconInitials:{type:"string",defaultValue:""},iconAlt:{type:"string",defaultValue:""},iconBackgroundColor:{type:"sap.m.AvatarColor",defaultValue:u.Transparent}},aggregations:{_title:{type:"sap.m.Text",multiple:false,visibility:"hidden"},_subtitle:{type:"sap.m.Text",multiple:false,visibility:"hidden"},_avatar:{type:"sap.f.Avatar",multiple:false,visibility:"hidden"}},events:{press:{}}},renderer:o});g.prototype.init=function(){t.prototype.init.apply(this,arguments);this._oRb=n.getLibraryResourceBundle("sap.f");this.data("sap-ui-fastnavgroup","true",true);this._oAriaAvatarText=new p({id:this.getId()+"-ariaAvatarText"});this._oAriaAvatarText.setText(this._oRb.getText("ARIA_HEADER_AVATAR_TEXT"))};g.prototype.exit=function(){t.prototype.exit.apply(this,arguments);if(this._oAriaAvatarText){this._oAriaAvatarText.destroy();this._oAriaAvatarText=null}this._oRb=null};g.prototype._getTitle=function(){var t=this.getAggregation("_title");if(!t){t=new a({maxLines:3}).addStyleClass("sapFCardTitle");this.setAggregation("_title",t)}return t};g.prototype._getSubtitle=function(){var t=this.getAggregation("_subtitle");if(!t){t=new a({maxLines:2}).addStyleClass("sapFCardSubtitle");this.setAggregation("_subtitle",t)}return t};g.prototype._getAvatar=function(){var t=this.getAggregation("_avatar");if(!t){t=(new s).addStyleClass("sapFCardIcon");this.setAggregation("_avatar",t)}return t};g.prototype.onBeforeRendering=function(){t.prototype.onBeforeRendering.apply(this,arguments);var e=this._getAvatar();this._getTitle().setText(this.getTitle());this._getSubtitle().setText(this.getSubtitle());e.setDisplayShape(this.getIconDisplayShape());e.setSrc(this.getIconSrc());e.setInitials(this.getIconInitials());e.setTooltip(this.getIconAlt());e.setBackgroundColor(this.getIconBackgroundColor());this._setAccessibilityAttributes()};g.prototype._getHeaderAccessibility=function(){var t=this.getSubtitle()?this._getSubtitle().getId():"",e=this.getStatusText()?this.getId()+"-status":"",i=this.getIconSrc()||this.getIconInitials()?this.getId()+"-ariaAvatarText ":"",a=t+" "+e+" "+i;return a.replace(/ {2,}/g," ").trim()};g.prototype.onAfterRendering=function(){if(r.browser.msie){if(this.getTitle()){this._getTitle().clampText()}if(this.getSubtitle()){this._getSubtitle().clampText()}}};g.prototype.ontap=function(t){var e=t.srcControl;if(e&&e.getId().indexOf("overflowButton")>-1){return}this.firePress()};g.prototype.onsapselect=function(){this.firePress()};g.prototype._setAccessibilityAttributes=function(){if(this.hasListeners("press")){this._sAriaRole="button";this._sAriaHeadingLevel=undefined;this._sAriaRoleDescritoion=this._oRb.getText("ARIA_ROLEDESCRIPTION_INTERACTIVE_CARD_HEADER")}else{this._sAriaRole="heading";this._sAriaHeadingLevel="3";this._sAriaRoleDescritoion=this._oRb.getText("ARIA_ROLEDESCRIPTION_CARD_HEADER")}};g.prototype.isLoading=function(){return false};g.prototype.attachPress=function(){var e=Array.prototype.slice.apply(arguments);e.unshift("press");t.prototype.attachEvent.apply(this,e);this.invalidate();return this};g.prototype.detachPress=function(){var e=Array.prototype.slice.apply(arguments);e.unshift("press");t.prototype.detachEvent.apply(this,e);this.invalidate();return this};g.prototype._isInsideGridContainer=function(){var t=this.getParent();if(!t){return false}t=t.getParent();if(!t){return false}return t.isA("sap.f.GridContainer")};return g});