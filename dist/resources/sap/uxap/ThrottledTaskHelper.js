/*!
 * OpenUI5
 * (c) Copyright 2009-2021 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/ui/thirdparty/jquery","sap/ui/base/Object"],function(i,s){"use strict";var t=s.extend("sap.uxap.ThrottledTask",{constructor:function(i,s,t){this._fnTask=i;this._iDelay=s;this._oContext=t;this._oPromise=null;this._fnResolvePromise=null;this._fnRejectPromise=null;this._iTimer=null;this._oTaskOptions=null},reSchedule:function(i,s){var t=this._getPromise();if(this._iTimer){clearTimeout(this._iTimer);this._iTimer=null}this._oTaskOptions=this._mergeOptions(this._oTaskOptions||{},s);if(i){var e=this._fnTask.call(this._oContext,this._oTaskOptions);this._completePromise(e);return t}this._iTimer=setTimeout(function(){if(this._oPromise){var i=this._fnTask.call(this._oContext,this._oTaskOptions);this._completePromise(i)}}.bind(this),this._iDelay);return t},_getPromise:function(){if(!this._oPromise){this._oPromise=new Promise(function(i,s){this._fnResolvePromise=i;this._fnRejectPromise=s}.bind(this))}return this._oPromise},_completePromise:function(i){var s=i?this._fnResolvePromise:this._fnRejectPromise;s();this._oPromise=null;this._fnResolvePromise=null;this._fnRejectPromise=null;this._oTaskOptions=null},_mergeOptions:function(s,t){var e=i.extend({},s,t);i.each(e,function(i){e[i]=s[i]||t[i]});return e}});return t});