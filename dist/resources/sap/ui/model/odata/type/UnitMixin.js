/*!
 * OpenUI5
 * (c) Copyright 2009-2021 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/ui/model/ParseException","sap/ui/model/ValidateException"],function(t,e){"use strict";var n=new Map,i=/\.(\d+)$/,s=/\.$/,o=/0+$/;function r(t,e){return sap.ui.getCore().getLibraryResourceBundle().getText(t,e)}function u(t){var n,s,o,u=t[0],a=t[1];if(this.mCustomUnits===undefined){throw new e("Cannot validate value without customizing")}if(!u||!a||!this.mCustomUnits){return}o=i.exec(u);s=o?o[1].length:0;n=this.mCustomUnits[a].decimals;if(s>n){throw new e(n?r("EnterNumberFraction",[n]):r("EnterInt"))}}return function(e,i,r){function a(t,e){var s,o=this;if(this.mCustomUnits===undefined&&t&&t[2]!==undefined){if(t[2]===null){this.mCustomUnits=null}else{this.mCustomUnits=n.get(t[2]);if(!this.mCustomUnits){this.mCustomUnits={};Object.keys(t[2]).forEach(function(e){o.mCustomUnits[e]=o.getCustomUnitForKey(t[2],e)});n.set(t[2],this.mCustomUnits)}s={};s[r]=this.mCustomUnits;i.prototype.setFormatOptions.call(this,Object.assign(s,this.oFormatOptions))}}if(!t||t[0]===undefined||t[1]===undefined||this.mCustomUnits===undefined&&t[2]===undefined){return null}return i.prototype.formatValue.call(this,t.slice(0,2),e)}function m(){var t=i.prototype.getFormatOptions.call(this);delete t[r];return t}function p(){if(!this.bShowMeasure){return[1,2]}else if(!this.bShowNumber){return[0,2]}return[2]}function l(e,n){var r;if(this.mCustomUnits===undefined){throw new t("Cannot parse value without customizing")}r=i.prototype.parseValue.apply(this,arguments);if(r[0]&&typeof r[0]==="string"&&r[0].includes(".")){r[0]=r[0].replace(o,"").replace(s,"")}return r}function f(t,e){if(t&&t[r]){throw new Error("Format option "+r+" is not supported")}if(e){throw new Error("Constraints not supported")}if(arguments.length>2){throw new Error("Only the parameter oFormatOptions is supported")}t=Object.assign({emptyString:0,parseAsString:true,unitOptional:!t||["showMeasure","showNumber"].every(function(e){return!(e in t)||t[e]})},t);i.call(this,t,e);this.mCustomUnits=undefined;this.setConstraints=function(){throw new Error("Constraints not supported")};this.setFormatOptions=function(){throw new Error("Format options are immutable")}}e._applyUnitMixin=f;e.formatValue=a;e.getFormatOptions=m;e.getPartsIgnoringMessages=p;e.parseValue=l;e.validateValue=u}},false);