/*!
* OpenUI5
 * (c) Copyright 2009-2021 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
*/
sap.ui.define(["./HyphenationTestingWords","sap/ui/base/ManagedObject","sap/base/Log","sap/base/util/deepEqual","sap/ui/core/Locale"],function(e,n,i,t,a){"use strict";var r={bg:true,ca:true,hr:true,cs:false,// no valid license
da:true,nl:true,"en-us":true,et:true,fi:true,fr:true,de:true,"el-monoton":true,hi:true,hu:true,it:true,lt:true,"nb-no":true,pl:false,// no valid license
pt:true,ru:true,sr:false,// no valid license
sl:true,es:true,sv:true,th:true,tr:true,uk:true};var o={bg:"Bulgarian",ca:"Catalan",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch",en:"English",et:"Estonian",fi:"Finnish",fr:"French",de:"German",el:"Greek",hi:"Hindi",hu:"Hungarian",it:"Italian",lt:"Lithuanian",nb:"Norwegian Bokmål",no:"Norwegian",pl:"Polish",pt:"Portuguese",ru:"Russian",sr:"Serbian",sl:"Slovenian",es:"Spanish",sv:"Swedish",th:"Thai",tr:"Turkish",uk:"Ukrainian"};var u={};var s={};var h={};var p=null;var l=null;var c={};var f={};var d=[];var y={};function g(e,n,t){i.info("[UI5 Hyphenation] Initializing third-party module for language "+k(e),"sap.ui.core.hyphenation.Hyphenation.initialize()");window.hyphenopoly.initializeLanguage(n).then(b.bind(this,e,t))}function v(e,n,t){i.info("[UI5 Hyphenation] Re-initializing third-party module for language "+k(e),"sap.ui.core.hyphenation.Hyphenation.initialize()");window.hyphenopoly.reInitializeLanguage(e,n).then(b.bind(this,e,t))}function b(e,n,i){c[e]=i;p.bIsInitialized=true;if(d.length>0){d.forEach(function(e){g(e.sLanguage,e.oConfig,e.resolve)});d=[]}p.bLoading=false;n(U(e))}function m(e,n){var t={require:[e],hyphen:"­",leftmin:3,rightmin:3,compound:"all",path:sap.ui.require.toUrl("sap/ui/thirdparty/hyphenopoly")};if(n){if("hyphen"in n){t.hyphen=n.hyphen}if("minWordLength"in n){t.minWordLength=n.minWordLength}if("exceptions"in n){i.info("[UI5 Hyphenation] Add hyphenation exceptions '"+JSON.stringify(n.exceptions)+"' for language "+k(e),"sap.ui.core.hyphenation.Hyphenation");var a=[];Object.keys(n.exceptions).forEach(function(e){a.push(n.exceptions[e])});if(a.length>0){t.exceptions={};t.exceptions[e]=a.join(", ")}}}return t}function w(e,n){return new Promise(function(i,t){var a=document.createElement("script");a.async=true;a.src=e+n;a.addEventListener("load",i);a.addEventListener("error",function(){return t("Error loading script: "+n)});a.addEventListener("abort",function(){return t(n+" Script loading aborted.")});document.head.appendChild(a)})}var L=function e(){var n=["visibility:hidden;","-moz-hyphens:auto;","-webkit-hyphens:auto;","-ms-hyphens:auto;","hyphens:auto;","width:48px;","font-size:12px;","line-height:12px;","border:none;","padding:0;","word-wrap:normal"];return n.join("")}();function H(n){if(!l){l=document.createElement("body")}var i=document.createElement("div");i.lang=n;i.id=n;i.style.cssText=L;i.appendChild(document.createTextNode(e[n.toLowerCase()]));l.appendChild(i)}function z(e){if(l){e.appendChild(l);return l}return null}function I(){if(l){l.parentNode.removeChild(l)}}function x(e){return e.style.hyphens==="auto"||e.style.webkitHyphens==="auto"||e.style.msHyphens==="auto"||e.style["-moz-hyphens"]==="auto"}function E(e){var n;if(e){n=new a(e)}else{n=sap.ui.getCore().getConfiguration().getLocale()}var i=n.getLanguage().toLowerCase();switch(i){case"en":i="en-us";break;case"nb":i="nb-no";break;case"no":i="nb-no";break;case"el":i="el-monoton";break}return i}function P(e){if(e){return new a(e).toString()}return sap.ui.getCore().getConfiguration().getLocale().toString()}function U(e){if(typeof e==="string"){return e.substring(0,2)}else{return null}}function k(e){var n=U(e);if(o.hasOwnProperty(n)){return"'"+o[n]+"' (code:'"+n+"')"}else{return"'"+n+"'"}}function C(e){p.fireError(e);i.error("[UI5 Hyphenation] "+e,"sap.ui.core.hyphenation.Hyphenation")}var O=n.extend("sap.ui.core.hyphenation.Hyphenation",{metadata:{library:"sap.ui.core",events:{error:{parameters:{sErrorMessage:{type:"string"}}}}}});O.prototype.canUseNativeHyphenation=function(e){var n=P(e);var t;if(!this.isLanguageSupported(e)){return null}if(!u.hasOwnProperty(n)){H(n);var a=z(document.documentElement);if(a!==null){var r=document.getElementById(n);if(x(r)&&r.offsetHeight>12){t=true}else{t=false}I()}u[n]=t;if(t){i.info("[UI5 Hyphenation] Browser-native hyphenation can be used for language "+k(n),"sap.ui.core.hyphenation.Hyphenation.canUseNativeHyphenation()")}else{i.info("[UI5 Hyphenation] Browser-native hyphenation is not supported by current platform for language "+k(n),"sap.ui.core.hyphenation.Hyphenation.canUseNativeHyphenation()")}}else{t=u[n]}return t};O.prototype.canUseThirdPartyHyphenation=function(e){var n=E(e),t;if(!this.isLanguageSupported(e)){return null}if(!h.hasOwnProperty(n)){t=r.hasOwnProperty(n)&&r[n];if(t){i.info("[UI5 Hyphenation] Third-party hyphenation can be used for language "+k(n),"sap.ui.core.hyphenation.Hyphenation.canUseThirdPartyHyphenation()")}else{i.info("[UI5 Hyphenation] Third-party hyphenation is not supported for language "+k(n),"sap.ui.core.hyphenation.Hyphenation.canUseThirdPartyHyphenation()")}h[n]=t}else{t=h[n]}return t};O.prototype.isLanguageSupported=function(n){var t=E(n),a;if(!s.hasOwnProperty(t)){a=e.hasOwnProperty(t);if(!a){i.info("[UI5 Hyphenation] Language "+k(t)+" is not known to the Hyphenation API","sap.ui.core.hyphenation.Hyphenation.isLanguageSupported()")}s[t]=a}else{a=s[t]}return a};O.prototype.hyphenate=function(e,n){var i=E(n);if(!c.hasOwnProperty(i)){C("Language "+k(i)+" is not initialized. You have to initialize it first with method 'initialize()'");return e}return c[i](e)};O.prototype.getInitializedLanguages=function(){return Object.keys(c).map(function(e){return U(e)})};O.prototype.isLanguageInitialized=function(e){var e=E(e);return Object.keys(c).indexOf(e)!=-1};O.prototype.getExceptions=function(e){var e=E(e);if(this.isLanguageInitialized(e)){return window.hyphenopoly.languages[e].exceptions}else{C("Language "+k(e)+" is not initialized. You have to initialize it first with method 'initialize()'")}};O.prototype.addExceptions=function(e,n){var e=E(e);if(this.isLanguageInitialized(e)){i.info("[UI5 Hyphenation] Add hyphenation exceptions '"+JSON.stringify(n)+"' for language "+k(e),"sap.ui.core.hyphenation.Hyphenation.addExceptions()");Object.keys(n).forEach(function(i){window.hyphenopoly.languages[e].cache[i]=n[i];window.hyphenopoly.languages[e].exceptions[i]=n[i]})}else{C("Language "+k(e)+" is not initialized. You have to initialize it first with method 'initialize()'")}};O.prototype.initialize=function(e,n){var i=E(e);var n=m(i,n);var a=true;if(y[i]&&t(y[i],n)){a=false}y[i]=n;if(r[i]){if(!p.bIsInitialized&&!p.bLoading){p.bLoading=true;f[i]=new Promise(function(e,t){w(n.path,"/hyphenopoly.bundle.js").then(g.bind(this,i,n,e))});return f[i]}else if(p.bLoading&&!c[i]&&f[i]){return f[i]}else if(this.isLanguageInitialized(i)){if(a){f[i]=new Promise(function(e){v(i,n,e)})}}else{f[i]=new Promise(function(e,t){if(!p.bIsInitialized){d.push({sLanguage:i,oConfig:n,resolve:e})}else{g(i,n,e)}})}p.bLoading=true;return f[i]}else{var o="Language "+k(e)+" can not be initialized. It is either not supported by the third-party module or an error occurred";C(o);return new Promise(function(e,n){n(o)})}};O.getInstance=function(){if(!p){p=new O;p.bIsInitialized=false;p.bLoading=false}return p};return O});